import{b as te,bv as ae,l as m,bo as re,bN as ue,bO as h,bl as le,a as se,aO as ie,u as oe,C as ce,D as de,bP as me,k as _,bQ as E,a2 as pe,bR as be,a3 as fe,aa as ve,ac as Ne,o as b,c as F,an as R,e as t,n as T,aT as S,z as B,s as G,q as V,b2 as _e,bS as Ve,au as L,f as Y,b3 as he,bT as Ie,E as ge,av as D,_ as ye,a0 as we,a4 as q,w as Ee,y as Se}from"./index.1cefbf14.js";import{v as H}from"./index.7b1d721d.js";const Pe=te({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:ae,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||m(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),ke={[re]:(r,I)=>r!==I,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[ue]:r=>m(r)||h(r),[le]:r=>m(r)||h(r)},xe=["aria-label","onKeydown"],Ae=["aria-label","onKeydown"],Ce={name:"ElInputNumber"},Fe=se({...Ce,props:Pe,emits:ke,setup(r,{expose:I,emit:c}){const a=r,{t:z}=ie(),d=oe("input-number"),v=ce(),s=de({currentValue:a.modelValue,userInput:null}),{formItem:f}=me(),O=_(()=>m(a.modelValue)&&g(a.modelValue,-1)<a.min),K=_(()=>m(a.modelValue)&&g(a.modelValue)>a.max),Q=_(()=>{const e=$(a.step);return E(a.precision)?Math.max($(a.modelValue),e):(e>a.precision,a.precision)}),P=_(()=>a.controls&&a.controlsPosition==="right"),M=pe(),N=be(),W=_(()=>{if(s.userInput!==null)return s.userInput;let e=s.currentValue;if(h(e))return"";if(m(e)){if(Number.isNaN(e))return"";E(a.precision)||(e=e.toFixed(a.precision))}return e}),k=(e,n)=>{if(E(n)&&(n=Q.value),n===0)return Math.round(e);let u=String(e);const l=u.indexOf(".");if(l===-1||!u.replace(".","").split("")[l+n])return e;const y=u.length;return u.charAt(y-1)==="5"&&(u=`${u.slice(0,Math.max(0,y-1))}6`),Number.parseFloat(Number(u).toFixed(n))},$=e=>{if(h(e))return 0;const n=e.toString(),u=n.indexOf(".");let l=0;return u!==-1&&(l=n.length-u-1),l},g=(e,n=1)=>m(e)?k(e+a.step*n):s.currentValue,x=()=>{if(N.value||K.value)return;const e=a.modelValue||0,n=g(e);C(n)},A=()=>{if(N.value||O.value)return;const e=a.modelValue||0,n=g(e,-1);C(n)},U=(e,n)=>{const{max:u,min:l,step:i,precision:p,stepStrictly:y,valueOnClear:w}=a;let o=Number(e);if(h(e)||Number.isNaN(o))return null;if(e===""){if(w===null)return null;o=we(w)?{min:l,max:u}[w]:w}return y&&(o=k(Math.round(o/i)*i,p)),E(p)||(o=k(o,p)),(o>u||o<l)&&(o=o>u?u:l,n&&c("update:modelValue",o)),o},C=e=>{var n;const u=s.currentValue,l=U(e);u!==l&&(s.userInput=null,c("update:modelValue",l),c("input",l),c("change",l,u),a.validateEvent&&((n=f==null?void 0:f.validate)==null||n.call(f,"change").catch(i=>q())),s.currentValue=l)},j=e=>s.userInput=e,J=e=>{const n=e!==""?Number(e):"";(m(n)&&!Number.isNaN(n)||e==="")&&C(n),s.userInput=null},X=()=>{var e,n;(n=(e=v.value)==null?void 0:e.focus)==null||n.call(e)},Z=()=>{var e,n;(n=(e=v.value)==null?void 0:e.blur)==null||n.call(e)},ee=e=>{c("focus",e)},ne=e=>{var n;c("blur",e),a.validateEvent&&((n=f==null?void 0:f.validate)==null||n.call(f,"blur").catch(u=>q()))};return fe(()=>a.modelValue,e=>{s.currentValue=U(e,!0),s.userInput=null},{immediate:!0}),ve(()=>{var e;const{min:n,max:u,modelValue:l}=a,i=(e=v.value)==null?void 0:e.input;if(i.setAttribute("role","spinbutton"),Number.isFinite(u)?i.setAttribute("aria-valuemax",String(u)):i.removeAttribute("aria-valuemax"),Number.isFinite(n)?i.setAttribute("aria-valuemin",String(n)):i.removeAttribute("aria-valuemin"),i.setAttribute("aria-valuenow",String(s.currentValue)),i.setAttribute("aria-disabled",String(N.value)),!m(l)&&l!=null){let p=Number(l);Number.isNaN(p)&&(p=null),c("update:modelValue",p)}}),Ne(()=>{var e;const n=(e=v.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${s.currentValue}`)}),I({focus:X,blur:Z}),(e,n)=>(b(),F("div",{class:T([t(d).b(),t(d).m(t(M)),t(d).is("disabled",t(N)),t(d).is("without-controls",!e.controls),t(d).is("controls-right",t(P))]),onDragstart:n[0]||(n[0]=D(()=>{},["prevent"]))},[e.controls?R((b(),F("span",{key:0,role:"button","aria-label":t(z)("el.inputNumber.decrease"),class:T([t(d).e("decrease"),t(d).is("disabled",t(O))]),onKeydown:S(A,["enter"])},[B(t(L),null,{default:G(()=>[t(P)?(b(),V(t(_e),{key:0})):(b(),V(t(Ve),{key:1}))]),_:1})],42,xe)),[[t(H),A]]):Y("v-if",!0),e.controls?R((b(),F("span",{key:1,role:"button","aria-label":t(z)("el.inputNumber.increase"),class:T([t(d).e("increase"),t(d).is("disabled",t(K))]),onKeydown:S(x,["enter"])},[B(t(L),null,{default:G(()=>[t(P)?(b(),V(t(he),{key:0})):(b(),V(t(Ie),{key:1}))]),_:1})],42,Ae)),[[t(H),x]]):Y("v-if",!0),B(t(ge),{id:e.id,ref_key:"input",ref:v,type:"number",step:e.step,"model-value":t(W),placeholder:e.placeholder,disabled:t(N),size:t(M),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[S(D(x,["prevent"]),["up"]),S(D(A,["prevent"]),["down"])],onBlur:ne,onFocus:ee,onInput:j,onChange:J},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}});var Te=ye(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Be=Ee(Te);const De={};function ze(r,I){const c=Be;return b(),V(c)}const Me=Se(De,[["render",ze]]);export{Me as default};
