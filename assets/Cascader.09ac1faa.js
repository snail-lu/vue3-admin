import{a as ce,u as oe,aG as sn,ax as $e,b_ as Ke,b0 as Oe,ay as ln,j as ge,k as N,_ as Ce,au as P,o as h,c as F,f as Z,q as A,b6 as re,s as H,z as G,n as L,ag as te,g as se,aP as qe,az as Ue,C as T,b$ as tn,as as de,i as on,t as ne,aF as rn,bU as Ne,a9 as Ie,bL as dn,c0 as Me,c1 as un,c2 as cn,bc as be,bg as ke,x as pn,D as hn,a5 as ae,c3 as fn,ac as Re,ah as le,aO as je,bd as vn,be as O,c4 as fe,c5 as We,E as mn,aQ as gn,bj as bn,aR as kn,bh as Cn,bi as yn,a8 as Nn,aa as En,a4 as $n,a6 as wn,c6 as Sn,af as Vn,bf as Tn,aT as Pn,av as he,aE as Dn,bk as Ln,h as In,a$ as ze,r as Mn,y as zn}from"./index.3c736d21.js";import{E as Hn,t as Fn}from"./el-tag.26fc2e61.js";import{E as An}from"./el-checkbox.d5eda1dd.js";import{E as Bn}from"./el-radio.f1f281f9.js";import{d as Kn}from"./el-scrollbar.d04beedd.js";import{i as ue}from"./el-form-item.d59d0736.js";import{u as He,c as Fe}from"./arrays.6dddb988.js";import{b as On}from"./_baseFlatten.53b31ddf.js";import{C as qn}from"./index.4f464979.js";var Un=1/0;function Rn(e){var n=e==null?0:e.length;return n?On(e,Un):[]}var jn=ce({name:"NodeContent",setup(){return{ns:oe("cascader-node")}},render(){const{ns:e}=this,{node:n,panel:a}=this.$parent,{data:l,label:t}=n,{renderLabelFn:u}=a;return sn("span",{class:e.e("label")},u?u({node:n,data:l}):t)}});const we=Symbol(),Wn=ce({name:"ElCascaderNode",components:{ElCheckbox:An,ElRadio:Bn,NodeContent:jn,ElIcon:$e,Check:Ke,Loading:Oe,ArrowRight:ln},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:n}){const a=ge(we),l=oe("cascader-node"),t=N(()=>a.isHoverMenu),u=N(()=>a.config.multiple),d=N(()=>a.config.checkStrictly),c=N(()=>{var k;return(k=a.checkedNodes[0])==null?void 0:k.uid}),v=N(()=>e.node.isDisabled),m=N(()=>e.node.isLeaf),b=N(()=>d.value&&!m.value||!v.value),S=N(()=>D(a.expandingNode)),C=N(()=>d.value&&a.checkedNodes.some(D)),D=k=>{var M;const{level:Y,uid:ee}=e.node;return((M=k==null?void 0:k.pathNodes[Y-1])==null?void 0:M.uid)===ee},I=()=>{S.value||a.expandNode(e.node)},U=k=>{const{node:M}=e;k!==M.checked&&a.handleCheckChange(M,k)},o=()=>{a.lazyLoad(e.node,()=>{m.value||I()})},V=k=>{!t.value||(B(),!m.value&&n("expand",k))},B=()=>{const{node:k}=e;!b.value||k.loading||(k.loaded?I():o())},K=()=>{t.value&&!m.value||(m.value&&!v.value&&!d.value&&!u.value?R(!0):B())},X=k=>{d.value?(U(k),e.node.loaded&&I()):R(k)},R=k=>{e.node.loaded?(U(k),!d.value&&I()):o()};return{panel:a,isHoverMenu:t,multiple:u,checkStrictly:d,checkedNodeId:c,isDisabled:v,isLeaf:m,expandable:b,inExpandingPath:S,inCheckedPath:C,ns:l,handleHoverExpand:V,handleExpand:B,handleClick:K,handleCheck:R,handleSelectCheck:X}}}),Zn=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Gn=se("span",null,null,-1);function Xn(e,n,a,l,t,u){const d=P("el-checkbox"),c=P("el-radio"),v=P("check"),m=P("el-icon"),b=P("node-content"),S=P("loading"),C=P("arrow-right");return h(),F("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:L([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:n[2]||(n[2]=(...D)=>e.handleHoverExpand&&e.handleHoverExpand(...D)),onFocus:n[3]||(n[3]=(...D)=>e.handleHoverExpand&&e.handleHoverExpand(...D)),onClick:n[4]||(n[4]=(...D)=>e.handleClick&&e.handleClick(...D))},[Z(" prefix "),e.multiple?(h(),A(d,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:n[0]||(n[0]=re(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(h(),A(c,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:n[1]||(n[1]=re(()=>{},["stop"]))},{default:H(()=>[Z(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Gn]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(h(),A(m,{key:2,class:L(e.ns.e("prefix"))},{default:H(()=>[G(v)]),_:1},8,["class"])):Z("v-if",!0),Z(" content "),G(b),Z(" postfix "),e.isLeaf?Z("v-if",!0):(h(),F(te,{key:3},[e.node.loading?(h(),A(m,{key:0,class:L([e.ns.is("loading"),e.ns.e("postfix")])},{default:H(()=>[G(S)]),_:1},8,["class"])):(h(),A(m,{key:1,class:L(["arrow-right",e.ns.e("postfix")])},{default:H(()=>[G(C)]),_:1},8,["class"]))],64))],42,Zn)}var Yn=Ce(Wn,[["render",Xn],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const Jn=ce({name:"ElCascaderMenu",components:{Loading:Oe,ElIcon:$e,ElScrollbar:qe,ElCascaderNode:Yn},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const n=rn(),a=oe("cascader-menu"),{t:l}=Ue(),t=tn();let u=null,d=null;const c=ge(we),v=T(null),m=N(()=>!e.nodes.length),b=N(()=>!c.initialLoaded),S=N(()=>`cascader-menu-${t}-${e.index}`),C=o=>{u=o.target},D=o=>{if(!(!c.isHoverMenu||!u||!v.value))if(u.contains(o.target)){I();const V=n.vnode.el,{left:B}=V.getBoundingClientRect(),{offsetWidth:K,offsetHeight:X}=V,R=o.clientX-B,k=u.offsetTop,M=k+u.offsetHeight;v.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${k} L${K} 0 V${k} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${M} L${K} ${X} V${M} Z" />
        `}else d||(d=window.setTimeout(U,c.config.hoverThreshold))},I=()=>{!d||(clearTimeout(d),d=null)},U=()=>{!v.value||(v.value.innerHTML="",I())};return{ns:a,panel:c,hoverZone:v,isEmpty:m,isLoading:b,menuId:S,t:l,handleExpand:C,handleMouseMove:D,clearHoverZone:U}}});function Qn(e,n,a,l,t,u){const d=P("el-cascader-node"),c=P("loading"),v=P("el-icon"),m=P("el-scrollbar");return h(),A(m,{key:e.menuId,tag:"ul",role:"menu",class:L(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:H(()=>{var b;return[(h(!0),F(te,null,de(e.nodes,S=>(h(),A(d,{key:S.uid,node:S,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(h(),F("div",{key:0,class:L(e.ns.e("empty-text"))},[G(v,{size:"14",class:L(e.ns.is("loading"))},{default:H(()=>[G(c)]),_:1},8,["class"]),on(" "+ne(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(h(),F("div",{key:1,class:L(e.ns.e("empty-text"))},ne(e.t("el.cascader.noData")),3)):(b=e.panel)!=null&&b.isHoverMenu?(h(),F("svg",{key:2,ref:"hoverZone",class:L(e.ns.e("hover-zone"))},null,2)):Z("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var _n=Ce(Jn,[["render",Qn],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]),Se=(e=>(e.CLICK="click",e.HOVER="hover",e))(Se||{});let xn=0;const ea=e=>{const n=[e];let{parent:a}=e;for(;a;)n.unshift(a),a=a.parent;return n};class ie{constructor(n,a,l,t=!1){this.data=n,this.config=a,this.parent=l,this.root=t,this.uid=xn++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:u,label:d,children:c}=a,v=n[c],m=ea(this);this.level=t?0:l?l.level+1:1,this.value=n[u],this.label=n[d],this.pathNodes=m,this.pathValues=m.map(b=>b.value),this.pathLabels=m.map(b=>b.label),this.childrenData=v,this.children=(v||[]).map(b=>new ie(b,a,this)),this.loaded=!a.lazy||this.isLeaf||!Ne(v)}get isDisabled(){const{data:n,parent:a,config:l}=this,{disabled:t,checkStrictly:u}=l;return(Ie(t)?t(n,this):!!n[t])||!u&&(a==null?void 0:a.isDisabled)}get isLeaf(){const{data:n,config:a,childrenData:l,loaded:t}=this,{lazy:u,leaf:d}=a,c=Ie(d)?d(n,this):n[d];return dn(c)?u&&!t?!1:!(Array.isArray(l)&&l.length):!!c}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(n){const{childrenData:a,children:l}=this,t=new ie(n,this.config,this);return Array.isArray(a)?a.push(n):this.childrenData=[n],l.push(t),t}calcText(n,a){const l=n?this.pathLabels.join(a):this.label;return this.text=l,l}broadcast(n,...a){const l=`onParent${Me(n)}`;this.children.forEach(t=>{t&&(t.broadcast(n,...a),t[l]&&t[l](...a))})}emit(n,...a){const{parent:l}=this,t=`onChild${Me(n)}`;l&&(l[t]&&l[t](...a),l.emit(n,...a))}onParentCheck(n){this.isDisabled||this.setCheckState(n)}onChildCheck(){const{children:n}=this,a=n.filter(t=>!t.isDisabled),l=a.length?a.every(t=>t.checked):!1;this.setCheckState(l)}setCheckState(n){const a=this.children.length,l=this.children.reduce((t,u)=>{const d=u.checked?1:u.indeterminate?.5:0;return t+d},0);this.checked=this.loaded&&this.children.filter(t=>!t.isDisabled).every(t=>t.loaded&&t.checked)&&n,this.indeterminate=this.loaded&&l!==a&&l>0}doCheck(n){if(this.checked===n)return;const{checkStrictly:a,multiple:l}=this.config;a||!l?this.checked=n:(this.broadcast("check",n),this.setCheckState(n),this.emit("check"))}}const Ee=(e,n)=>e.reduce((a,l)=>(l.isLeaf?a.push(l):(!n&&a.push(l),a=a.concat(Ee(l.children,n))),a),[]);class Ae{constructor(n,a){this.config=a;const l=(n||[]).map(t=>new ie(t,this.config));this.nodes=l,this.allNodes=Ee(l,!1),this.leafNodes=Ee(l,!0)}getNodes(){return this.nodes}getFlattedNodes(n){return n?this.leafNodes:this.allNodes}appendNode(n,a){const l=a?a.appendChild(n):new ie(n,this.config);a||this.nodes.push(l),this.allNodes.push(l),l.isLeaf&&this.leafNodes.push(l)}appendNodes(n,a){n.forEach(l=>this.appendNode(l,a))}getNodeByValue(n,a=!1){return!n&&n!==0?null:this.getFlattedNodes(a).find(t=>ue(t.value,n)||ue(t.pathValues,n))||null}getSameNode(n){return n&&this.getFlattedNodes(!1).find(({value:l,level:t})=>ue(n.value,l)&&n.level===t)||null}}const Ze={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},na={expandTrigger:Se.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:un,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},aa=e=>N(()=>({...na,...e.props})),Be=e=>{if(!e)return 0;const n=e.id.split("-");return Number(n[n.length-2])},sa=e=>{if(!e)return;const n=e.querySelector("input");n?n.click():cn(e)&&e.click()},la=(e,n)=>{const a=n.slice(0),l=a.map(u=>u.uid),t=e.reduce((u,d)=>{const c=l.indexOf(d.uid);return c>-1&&(u.push(d),a.splice(c,1),l.splice(c,1)),u},[]);return t.push(...a),t},ta=ce({name:"ElCascaderPanel",components:{ElCascaderMenu:_n},props:{...Ze,border:{type:Boolean,default:!0},renderLabel:Function},emits:[be,ke,"close","expand-change"],setup(e,{emit:n,slots:a}){let l=!1;const t=oe("cascader"),u=aa(e);let d=null;const c=T(!0),v=T([]),m=T(null),b=T([]),S=T(null),C=T([]),D=N(()=>u.value.expandTrigger===Se.HOVER),I=N(()=>e.renderLabel||a.default),U=()=>{const{options:r}=e,p=u.value;l=!1,d=new Ae(r,p),b.value=[d.getNodes()],p.lazy&&Ne(e.options)?(c.value=!1,o(void 0,f=>{f&&(d=new Ae(f,p),b.value=[d.getNodes()]),c.value=!0,Y(!1,!0)})):Y(!1,!0)},o=(r,p)=>{const f=u.value;r=r||new ie({},f,void 0,!0),r.loading=!0;const E=y=>{const $=r,j=$.root?null:$;y&&(d==null||d.appendNodes(y,j)),$.loading=!1,$.loaded=!0,$.childrenData=$.childrenData||[],p&&p(y)};f.lazyLoad(r,E)},V=(r,p)=>{var f;const{level:E}=r,y=b.value.slice(0,E);let $;r.isLeaf?$=r.pathNodes[E-2]:($=r,y.push(r.children)),((f=S.value)==null?void 0:f.uid)!==($==null?void 0:$.uid)&&(S.value=r,b.value=y,!p&&n("expand-change",(r==null?void 0:r.pathValues)||[]))},B=(r,p,f=!0)=>{const{checkStrictly:E,multiple:y}=u.value,$=C.value[0];l=!0,!y&&($==null||$.doCheck(!1)),r.doCheck(p),M(),f&&!y&&!E&&n("close"),!f&&!y&&!E&&K(r)},K=r=>{!r||(r=r.parent,K(r),r&&V(r))},X=r=>d==null?void 0:d.getFlattedNodes(r),R=r=>{var p;return(p=X(r))==null?void 0:p.filter(f=>f.checked!==!1)},k=()=>{C.value.forEach(r=>r.doCheck(!1)),M()},M=()=>{var r;const{checkStrictly:p,multiple:f}=u.value,E=C.value,y=R(!p),$=la(E,y),j=$.map(w=>w.valueByOption);C.value=$,m.value=f?j:(r=j[0])!=null?r:null},Y=(r=!1,p=!1)=>{const{modelValue:f}=e,{lazy:E,multiple:y,checkStrictly:$}=u.value,j=!$;if(!(!c.value||l||!p&&ue(f,m.value)))if(E&&!r){const J=He(Rn(Fe(f))).map(q=>d==null?void 0:d.getNodeByValue(q)).filter(q=>!!q&&!q.loaded&&!q.loading);J.length?J.forEach(q=>{o(q,()=>Y(!1,p))}):Y(!0,p)}else{const w=y?Fe(f):[f],J=He(w.map(q=>d==null?void 0:d.getNodeByValue(q,j)));ee(J,!1),m.value=f}},ee=(r,p=!0)=>{const{checkStrictly:f}=u.value,E=C.value,y=r.filter(w=>!!w&&(f||w.isLeaf)),$=d==null?void 0:d.getSameNode(S.value),j=p&&$||y[0];j?j.pathNodes.forEach(w=>V(w,!0)):S.value=null,E.forEach(w=>w.doCheck(!1)),y.forEach(w=>w.doCheck(!0)),C.value=y,le(pe)},pe=()=>{!je||v.value.forEach(r=>{const p=r==null?void 0:r.$el;if(p){const f=p.querySelector(`.${t.namespace.value}-scrollbar__wrap`),E=p.querySelector(`.${t.b("node")}.${t.is("active")}`)||p.querySelector(`.${t.b("node")}.in-active-path`);vn(f,E)}})},_=r=>{const p=r.target,{code:f}=r;switch(f){case O.up:case O.down:{r.preventDefault();const E=f===O.up?-1:1;fe(We(p,E,`.${t.b("node")}[tabindex="-1"]`));break}case O.left:{r.preventDefault();const E=v.value[Be(p)-1],y=E==null?void 0:E.$el.querySelector(`.${t.b("node")}[aria-expanded="true"]`);fe(y);break}case O.right:{r.preventDefault();const E=v.value[Be(p)+1],y=E==null?void 0:E.$el.querySelector(`.${t.b("node")}[tabindex="-1"]`);fe(y);break}case O.enter:sa(p);break}};return pn(we,hn({config:u,expandingNode:S,checkedNodes:C,isHoverMenu:D,initialLoaded:c,renderLabelFn:I,lazyLoad:o,expandNode:V,handleCheckChange:B})),ae([u,()=>e.options],U,{deep:!0,immediate:!0}),ae(()=>e.modelValue,()=>{l=!1,Y()}),ae(m,r=>{ue(r,e.modelValue)||(n(be,r),n(ke,r))}),fn(()=>v.value=[]),Re(()=>!Ne(e.modelValue)&&Y()),{ns:t,menuList:v,menus:b,checkedNodes:C,handleKeyDown:_,handleCheckChange:B,getFlattedNodes:X,getCheckedNodes:R,clearCheckedNodes:k,calculateCheckedValue:M,scrollToExpandingNode:pe}}});function oa(e,n,a,l,t,u){const d=P("el-cascader-menu");return h(),F("div",{class:L([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:n[0]||(n[0]=(...c)=>e.handleKeyDown&&e.handleKeyDown(...c))},[(h(!0),F(te,null,de(e.menus,(c,v)=>(h(),A(d,{key:v,ref_for:!0,ref:m=>e.menuList[v]=m,index:v,nodes:[...c]},null,8,["index","nodes"]))),128))],34)}var ve=Ce(ta,[["render",oa],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);ve.install=e=>{e.component(ve.name,ve)};const ia=ve,ra=40,da={large:36,default:32,small:28},ua={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:n,placement:a}=e;["right","left","bottom","top"].includes(a)||(n.arrow.x=35)},requires:["arrow"]}]},ca="ElCascader",pa=ce({name:ca,components:{ElCascaderPanel:ia,ElInput:mn,ElTooltip:gn,ElScrollbar:qe,ElTag:Hn,ElIcon:$e,CircleClose:bn,Check:Ke,ArrowDown:kn},directives:{Clickoutside:qn},props:{...Ze,size:{type:String,validator:Cn},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,n)=>e.text.includes(n)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},teleported:yn.teleported,tagType:{...Fn.type,default:"info"},validateEvent:{type:Boolean,default:!0}},emits:[be,ke,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:n}){let a=0,l=0;const t=oe("cascader"),u=oe("input"),{t:d}=Ue(),c=ge(Nn,{}),v=ge(En,{}),m=T(null),b=T(null),S=T(null),C=T(null),D=T(null),I=T(!1),U=T(!1),o=T(!1),V=T(""),B=T(""),K=T([]),X=T([]),R=T([]),k=T(!1),M=N(()=>e.disabled||c.disabled),Y=N(()=>e.placeholder||d("el.cascader.placeholder")),ee=$n(),pe=N(()=>["small"].includes(ee.value)?"small":"default"),_=N(()=>!!e.props.multiple),r=N(()=>!e.filterable||_.value),p=N(()=>_.value?B.value:V.value),f=N(()=>{var s;return((s=C.value)==null?void 0:s.checkedNodes)||[]}),E=N(()=>!e.clearable||M.value||o.value||!U.value?!1:!!f.value.length),y=N(()=>{const{showAllLevels:s,separator:i}=e,g=f.value;return g.length?_.value?" ":g[0].calcText(s,i):""}),$=N({get(){return e.modelValue},set(s){var i;n(be,s),n(ke,s),e.validateEvent&&((i=v.validate)==null||i.call(v,"change").catch(g=>wn()))}}),j=N(()=>{var s,i;return(i=(s=m.value)==null?void 0:s.popperRef)==null?void 0:i.contentRef}),w=s=>{var i,g,z;if(!M.value&&(s=s!=null?s:!I.value,s!==I.value)){if(I.value=s,(g=(i=b.value)==null?void 0:i.input)==null||g.setAttribute("aria-expanded",`${s}`),s)J(),le((z=C.value)==null?void 0:z.scrollToExpandingNode);else if(e.filterable){const{value:Q}=y;V.value=Q,B.value=Q}n("visible-change",s)}},J=()=>{le(()=>{var s;(s=m.value)==null||s.updatePopper()})},q=()=>{o.value=!1},ye=s=>{const{showAllLevels:i,separator:g}=e;return{node:s,key:s.uid,text:s.calcText(i,g),hitState:!1,closable:!M.value&&!s.isDisabled,isCollapseTag:!1}},Ve=s=>{var i;const g=s.node;g.doCheck(!1),(i=C.value)==null||i.calculateCheckedValue(),n("remove-tag",g.valueByOption)},Ge=()=>{if(!_.value)return;const s=f.value,i=[],g=[];if(s.forEach(z=>g.push(ye(z))),X.value=g,s.length){const[z,...Q]=s,x=Q.length;i.push(ye(z)),x&&(e.collapseTags?i.push({key:-1,text:`+ ${x}`,closable:!1,isCollapseTag:!0}):Q.forEach(W=>i.push(ye(W))))}K.value=i},Te=()=>{var s,i;const{filterMethod:g,showAllLevels:z,separator:Q}=e,x=(i=(s=C.value)==null?void 0:s.getFlattedNodes(!e.props.checkStrictly))==null?void 0:i.filter(W=>W.isDisabled?!1:(W.calcText(z,Q),g(W,p.value)));_.value&&(K.value.forEach(W=>{W.hitState=!1}),X.value.forEach(W=>{W.hitState=!1})),o.value=!0,R.value=x,J()},Pe=()=>{var s;let i;o.value&&D.value?i=D.value.$el.querySelector(`.${t.e("suggestion-item")}`):i=(s=C.value)==null?void 0:s.$el.querySelector(`.${t.b("node")}[tabindex="-1"]`),i&&(i.focus(),!o.value&&i.click())},De=()=>{var s,i;const g=(s=b.value)==null?void 0:s.input,z=S.value,Q=(i=D.value)==null?void 0:i.$el;if(!(!je||!g)){if(Q){const x=Q.querySelector(`.${t.e("suggestion-list")}`);x.style.minWidth=`${g.offsetWidth}px`}if(z){const{offsetHeight:x}=z,W=K.value.length>0?`${Math.max(x+6,a)}px`:`${a}px`;g.style.height=W,J()}}},Xe=s=>{var i;return(i=C.value)==null?void 0:i.getCheckedNodes(s)},Ye=s=>{J(),n("expand-change",s)},Je=s=>{var i;const g=(i=s.target)==null?void 0:i.value;if(s.type==="compositionend")k.value=!1,le(()=>Le(g));else{const z=g[g.length-1]||"";k.value=!Tn(z)}},Qe=s=>{if(!k.value)switch(s.code){case O.enter:w();break;case O.down:w(!0),le(Pe),s.preventDefault();break;case O.esc:I.value===!0&&(s.preventDefault(),s.stopPropagation(),w(!1));break;case O.tab:w(!1);break}},_e=()=>{var s;(s=C.value)==null||s.clearCheckedNodes(),w(!1)},xe=s=>{var i,g;const{checked:z}=s;_.value?(i=C.value)==null||i.handleCheckChange(s,!z,!1):(!z&&((g=C.value)==null||g.handleCheckChange(s,!0,!1)),w(!1))},en=s=>{const i=s.target,{code:g}=s;switch(g){case O.up:case O.down:{const z=g===O.up?-1:1;fe(We(i,z,`.${t.e("suggestion-item")}[tabindex="-1"]`));break}case O.enter:i.click();break}},nn=()=>{const s=K.value,i=s[s.length-1];l=B.value?0:l+1,!(!i||!l)&&(i.hitState?Ve(i):i.hitState=!0)},an=Kn(()=>{const{value:s}=p;if(!s)return;const i=e.beforeFilter(s);Sn(i)?i.then(Te).catch(()=>{}):i!==!1?Te():q()},e.debounce),Le=(s,i)=>{!I.value&&w(!0),!(i!=null&&i.isComposing)&&(s?an():q())};return ae(o,J),ae([f,M],Ge),ae(K,()=>{le(()=>De())}),ae(y,s=>V.value=s,{immediate:!0}),Re(()=>{var s;const i=(s=b.value)==null?void 0:s.$el;a=(i==null?void 0:i.offsetHeight)||da[ee.value]||ra,Vn(i,De)}),{popperOptions:ua,tooltipRef:m,popperPaneRef:j,input:b,tagWrapper:S,panel:C,suggestionPanel:D,popperVisible:I,inputHover:U,inputPlaceholder:Y,filtering:o,presentText:y,checkedValue:$,inputValue:V,searchInputValue:B,presentTags:K,allPresentTags:X,suggestions:R,isDisabled:M,isOnComposition:k,realSize:ee,tagSize:pe,multiple:_,readonly:r,clearBtnVisible:E,nsCascader:t,nsInput:u,t:d,togglePopperVisible:w,hideSuggestionPanel:q,deleteTag:Ve,focusFirstNode:Pe,getCheckedNodes:Xe,handleExpandChange:Ye,handleKeyDown:Qe,handleComposition:Je,handleClear:_e,handleSuggestionClick:xe,handleSuggestionKeyDown:en,handleDelete:nn,handleInput:Le}}}),ha={key:0},fa={class:"el-cascader__collapse-tags"},va=["placeholder"],ma=["onClick"];function ga(e,n,a,l,t,u){const d=P("circle-close"),c=P("el-icon"),v=P("arrow-down"),m=P("el-input"),b=P("el-tag"),S=P("el-tooltip"),C=P("el-cascader-panel"),D=P("check"),I=P("el-scrollbar"),U=Pn("clickoutside");return h(),A(S,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":n[17]||(n[17]=o=>e.popperVisible=o),teleported:e.teleported,"popper-class":[e.nsCascader.e("dropdown"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${e.nsCascader.namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:H(()=>[he((h(),F("div",{class:L([e.nsCascader.b(),e.nsCascader.m(e.realSize),e.nsCascader.is("disabled",e.isDisabled),e.$attrs.class]),style:In(e.$attrs.style),onClick:n[11]||(n[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:n[12]||(n[12]=(...o)=>e.handleKeyDown&&e.handleKeyDown(...o)),onMouseenter:n[13]||(n[13]=o=>e.inputHover=!0),onMouseleave:n[14]||(n[14]=o=>e.inputHover=!1)},[G(m,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":n[1]||(n[1]=o=>e.inputValue=o),placeholder:e.searchInputValue?"":e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:L(e.nsCascader.is("focus",e.popperVisible)),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:n[2]||(n[2]=o=>e.$emit("focus",o)),onBlur:n[3]||(n[3]=o=>e.$emit("blur",o)),onInput:e.handleInput},{suffix:H(()=>[e.clearBtnVisible?(h(),A(c,{key:"clear",class:L([e.nsInput.e("icon"),"icon-circle-close"]),onClick:re(e.handleClear,["stop"])},{default:H(()=>[G(d)]),_:1},8,["class","onClick"])):(h(),A(c,{key:"arrow-down",class:L([e.nsInput.e("icon"),"icon-arrow-down",e.nsCascader.is("reverse",e.popperVisible)]),onClick:n[0]||(n[0]=re(o=>e.togglePopperVisible(),["stop"]))},{default:H(()=>[G(v)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(h(),F("div",{key:0,ref:"tagWrapper",class:L(e.nsCascader.e("tags"))},[(h(!0),F(te,null,de(e.presentTags,o=>(h(),A(b,{key:o.key,type:e.tagType,size:e.tagSize,hit:o.hitState,closable:o.closable,"disable-transitions":"",onClose:V=>e.deleteTag(o)},{default:H(()=>[o.isCollapseTag===!1?(h(),F("span",ha,ne(o.text),1)):(h(),A(S,{key:1,teleported:!1,disabled:e.popperVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:H(()=>[se("span",null,ne(o.text),1)]),content:H(()=>[se("div",fa,[(h(!0),F(te,null,de(e.allPresentTags,(V,B)=>(h(),F("div",{key:B,class:"el-cascader__collapse-tag"},[(h(),A(b,{key:V.key,class:"in-tooltip",type:e.tagType,size:e.tagSize,hit:V.hitState,closable:V.closable,"disable-transitions":"",onClose:K=>e.deleteTag(V)},{default:H(()=>[se("span",null,ne(V.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))]))),128))])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?he((h(),F("input",{key:0,"onUpdate:modelValue":n[4]||(n[4]=o=>e.searchInputValue=o),type:"text",class:L(e.nsCascader.e("search-input")),placeholder:e.presentText?"":e.inputPlaceholder,onInput:n[5]||(n[5]=o=>e.handleInput(e.searchInputValue,o)),onClick:n[6]||(n[6]=re(o=>e.togglePopperVisible(!0),["stop"])),onKeydown:n[7]||(n[7]=Dn((...o)=>e.handleDelete&&e.handleDelete(...o),["delete"])),onCompositionstart:n[8]||(n[8]=(...o)=>e.handleComposition&&e.handleComposition(...o)),onCompositionupdate:n[9]||(n[9]=(...o)=>e.handleComposition&&e.handleComposition(...o)),onCompositionend:n[10]||(n[10]=(...o)=>e.handleComposition&&e.handleComposition(...o))},null,42,va)),[[Ln,e.searchInputValue]]):Z("v-if",!0)],2)):Z("v-if",!0)],38)),[[U,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:H(()=>[he(G(C,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":n[15]||(n[15]=o=>e.checkedValue=o),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:n[16]||(n[16]=o=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[ze,!e.filtering]]),e.filterable?he((h(),A(I,{key:0,ref:"suggestionPanel",tag:"ul",class:L(e.nsCascader.e("suggestion-panel")),"view-class":e.nsCascader.e("suggestion-list"),onKeydown:e.handleSuggestionKeyDown},{default:H(()=>[e.suggestions.length?(h(!0),F(te,{key:0},de(e.suggestions,o=>(h(),F("li",{key:o.uid,class:L([e.nsCascader.e("suggestion-item"),e.nsCascader.is("checked",o.checked)]),tabindex:-1,onClick:V=>e.handleSuggestionClick(o)},[se("span",null,ne(o.text),1),o.checked?(h(),A(c,{key:0},{default:H(()=>[G(D)]),_:1})):Z("v-if",!0)],10,ma))),128)):Mn(e.$slots,"empty",{key:1},()=>[se("li",{class:L(e.nsCascader.e("empty-text"))},ne(e.t("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class","onKeydown"])),[[ze,e.filtering]]):Z("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-options","transition","onHide"])}var me=Ce(pa,[["render",ga],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/index.vue"]]);me.install=e=>{e.component(me.name,me)};const ba=me,ka=ba;const Ca={};function ya(e,n){const a=ka;return h(),A(a)}const La=zn(Ca,[["render",ya]]);export{La as default};
