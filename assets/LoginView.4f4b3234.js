import{a as C,C as _,D as h,E as V,o as D,c as y,g as m,z as e,s as r,e as f,i as A,t as I,F as x,G as S,H as U,A as k,B as L,y as q}from"./index.1cefbf14.js";import{E as M,a as N}from"./el-form-item.2d3d3b92.js";import{r as R,E as g}from"./request.528a411a.js";import{M as T}from"./md5.27896337.js";function $(o){const{username:i}=o;return R({method:"POST",url:`/${i}/login`,data:o})}const F=o=>(k("data-v-6be836e0"),o=o(),L(),o),z={class:"login-container"},G={class:"login-form-wrapper"},H=F(()=>m("h1",{class:"title"},"\u6B22\u8FCE\u767B\u5F55",-1)),O=F(()=>m("div",{class:"tips"},"\u63D0\u793A\uFF1A\u7528\u6237\u540D\u4E3Aadmin\u6216guest\uFF0C\u5BC6\u7801\u4E3A123456",-1)),P=C({__name:"LoginView",setup(o){const i=x(),p=_(),t=h({username:"admin",password:"123456"}),B={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"},{min:3,max:10,message:"\u7528\u6237\u540D\u957F\u5EA6\u9700\u89813~10\u4E2A\u5B57\u7B26",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:6,message:"\u5BC6\u7801\u81F3\u5C11\u9700\u89816\u4E2A\u5B57\u7B26",trigger:"blur"}]},w=S(),E=n=>w.commit("setUserInfo",{userInfo:n});let a=_(!1);const b=async n=>{!n||(a.value=!0,await n.validate(u=>{u&&$({...t,password:T.hashStr(t.password)}).then(s=>{s&&s.success&&(E(s.result),g.success("\u767B\u5F55\u6210\u529F~"),i.push({path:"/"})),a.value=!1},s=>{g.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7528\u6237\u540D\u6216\u5BC6\u7801"),a.value=!1})}))};return(n,u)=>{const s=U,c=V,d=M,v=N;return D(),y("div",z,[m("div",G,[H,e(v,{ref_key:"loginFormRef",ref:p,model:t,rules:B,class:"login-form"},{default:r(()=>[e(d,{label:"",prop:"username"},{default:r(()=>[e(c,{placeholder:"\u7528\u6237\u540D",modelValue:t.username,"onUpdate:modelValue":u[0]||(u[0]=l=>t.username=l)},{prepend:r(()=>[e(s,{icon:"User"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"",prop:"password"},{default:r(()=>[e(c,{placeholder:"\u5BC6\u7801",modelValue:t.password,"onUpdate:modelValue":u[1]||(u[1]=l=>t.password=l),type:"password","show-password":""},{prepend:r(()=>[e(s,{icon:"Unlock"})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:r(()=>[e(s,{type:"primary",class:"login-btn",onClick:u[2]||(u[2]=l=>b(p.value)),disabled:f(a)},{default:r(()=>[A(I(f(a)?"\u767B\u5F55\u4E2D...":"\u767B\u5F55"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"]),O])])}}});const W=q(P,[["__scopeId","data-v-6be836e0"]]);export{W as default};
